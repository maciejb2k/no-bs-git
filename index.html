<!DOCTYPE html>
<html lang="en">
  <head>
    <title>No Bullsh*t Git</title>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Learn git once and for all." />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&family=Fira+Code&display=swap"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/default.min.css"
    />
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div class="mobile-nav">
      <button class="mobile-nav__close">
        <svg
          class="h-6 w-6"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          aria-hidden="true"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18L18 6M6 6l12 12"
          />
        </svg>
      </button>
      <p class="nav__title">On this page:</p>
      <ul class="nav-list">
        <li>
          <a href="#" class="nav-link">Home</a>
        </li>
      </ul>
    </div>
    <div class="menu-background"></div>
    <div class="container">
      <header class="header">
        <div class="header__left">
          <a href="#">
            <img
              src="assets/logo_color.png"
              alt="text with name of the website"
              class="header__logo"
            />
          </a>
        </div>
        <div class="header__right">
          <a
            href="https://github.com/maciejb2k/no-bs-git"
            target="_blank"
            class="github-button"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              fill="currentColor"
              viewBox="0 0 1792 1792"
            >
              <path
                d="M896 128q209 0 385.5 103t279.5 279.5 103 385.5q0 251-146.5 451.5t-378.5 277.5q-27 5-40-7t-13-30q0-3 .5-76.5t.5-134.5q0-97-52-142 57-6 102.5-18t94-39 81-66.5 53-105 20.5-150.5q0-119-79-206 37-91-8-204-28-9-81 11t-92 44l-38 24q-93-26-192-26t-192 26q-16-11-42.5-27t-83.5-38.5-85-13.5q-45 113-8 204-79 87-79 206 0 85 20.5 150t52.5 105 80.5 67 94 39 102.5 18q-39 36-49 103-21 10-45 15t-57 5-65.5-21.5-55.5-62.5q-19-32-48.5-52t-49.5-24l-20-3q-21 0-29 4.5t-5 11.5 9 14 13 12l7 5q22 10 43.5 38t31.5 51l10 23q13 38 44 61.5t67 30 69.5 7 55.5-3.5l23-4q0 38 .5 88.5t.5 54.5q0 18-13 30t-40 7q-232-77-378.5-277.5t-146.5-451.5q0-209 103-385.5t279.5-279.5 385.5-103zm-477 1103q3-7-7-12-10-3-13 2-3 7 7 12 9 6 13-2zm31 34q7-5-2-16-10-9-16-3-7 5 2 16 10 10 16 3zm30 45q9-7 0-19-8-13-17-6-9 5 0 18t17 7zm42 42q8-8-4-19-12-12-20-3-9 8 4 19 12 12 20 3zm57 25q3-11-13-16-15-4-19 7t13 15q15 6 19-6zm63 5q0-13-17-11-16 0-16 11 0 13 17 11 16 0 16-11zm58-10q-2-11-18-9-16 3-14 15t18 8 14-14z"
              ></path>
            </svg>
            <span>GitHub</span>
          </a>
          <button class="nav-toggle-button">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              fill="currentColor"
              viewBox="0 0 1792 1792"
            >
              <path
                d="M1664 1344v128q0 26-19 45t-45 19h-1536q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1536q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19h-1536q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1536q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19h-1536q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1536q26 0 45 19t19 45z"
              ></path>
            </svg>
          </button>
        </div>
      </header>
      <div class="wrapper">
        <aside class="nav">
          <p class="nav__title">On this page:</p>
          <ul class="nav-list">
            <li>
              <a href="#" class="nav-link">Home</a>
            </li>
          </ul>
        </aside>
        <div class="content">
          <main>
            <div class="group">
              <h2 class="heading heading--h2">Boring preface</h2>
              <p class="text">
                <b>Git is hard for beginners</b>. Do you have similar feelings?
                I think most of you can agree with that. Git was very hard for
                me, and after months of struggling with Git, I finally found out
                why.
              </p>
              <p class="text">
                <b
                  >In my opinion, the problem is about lack of a full
                  understanding of a
                  <span class="code">.git/</span> directory.</b
                >
              </p>
              <p class="text">
                <b>Git is not a blackbox, which somehow works</b>. By uneveiling
                the mystery behind the
                <span class="code">.git/</span> directory, you will be able to
                freely use Git in your projects without worries.
              </p>
            </div>

            <div class="group">
              <h2 class="heading heading--h2">Before we start</h2>
              <p class="text">
                <a href="https://git-scm.com/downloads" target="_blank"
                  >Install Git</a
                >
                and make sure it works by typing:
                <span class="code">git --version</span>
              </p>
              <p class="text">
                <b>You have to learn how to use Git from the command line</b>.
                If you want to understand it, you have to use it from the
                command line.
              </p>
              <p class="text">
                This guide assumes that
                <b>you are familiar with the basics of Git</b>, but it's often
                unclear to you how Git actually works, and how to deal with the
                common Git problems.
              </p>
            </div>

            <div class="group">
              <h2 class="heading heading--h2">Creating a Git repository</h2>
              <p class="text">
                <span class="code">git init</span> creates a hidden
                <span class="code">.git/</span>
                directory in the current location.
              </p>
              <p class="text">
                Git determines whether you are inside a Git repository by,
                checking if there is a <span class="code">.git/</span> directory
                at the root of the directory.
              </p>
              <p class="text text--label">
                Take a look what is inside
                <span class="code">.git/</span> directory:
              </p>
              <pre><code class="code-block language-bash">$ cd .git/ && ls -al

total 32K
-rw-r--r-- 1 gigachad gigachad   23 Sep  8 13:19 HEAD
drwxr-xr-x 2 gigachad gigachad 4.0K Sep  8 13:19 branches
-rw-r--r-- 1 gigachad gigachad   92 Sep  8 13:19 config
-rw-r--r-- 1 gigachad gigachad   73 Sep  8 13:19 description
drwxr-xr-x 2 gigachad gigachad 4.0K Sep  8 13:19 hooks
drwxr-xr-x 2 gigachad gigachad 4.0K Sep  8 13:19 info
drwxr-xr-x 4 gigachad gigachad 4.0K Sep  8 13:19 objects
drwxr-xr-x 4 gigachad gigachad 4.0K Sep  8 13:19 refs</code></pre>
              <p class="text">
                Familirize yourself with these files and directories and don't
                do anything else for now. We will be focusing on the
                <span class="code">objects/</span> and
                <span class="code">refs/</span> directories in the next parts.
              </p>
            </div>

            <div class="group">
              <h2 class="heading heading--h2">SHA-1</h2>
              <p class="text">Everything in Git is based on <b>SHA-1</b>.</p>
              <p class="text">
                It is a
                <a href="https://en.wikipedia.org/wiki/SHA-1" target="_blank"
                  >cryptographic hash function</a
                >. You don't have to know how it mathematically works. You have
                to remember, that it takes any piece of text and turns it into
                <b>unique 40-character string of letters and numbers</b>. It's
                impossible to get back the original text from this unique
                string.
              </p>
              <div class="form">
                <div class="form__group">
                  <label for="sha1-input" class="form__label">Input:</label>
                  <input
                    class="form__input"
                    id="sha1-input"
                    type="text"
                    value="can horses swim?"
                  />
                </div>
                <div class="form__group">
                  <label for="sha1-output" class="form__label"
                    >SHA-1 Output:</label
                  >
                  <input
                    class="form__input"
                    id="sha1-output"
                    type="text"
                    disabled
                  />
                </div>
              </div>
              <p class="text">
                If you are wondering, what if SHA-1 will produce the same output
                for two different inputs, you can read about
                <a
                  href="https://en.wikipedia.org/wiki/Hash_collision"
                  target="_blank"
                  >collisions of hash functions</a
                >.
              </p>
              <p class="text">
                <b>Spoiler</b>: You will find that the probability of collision
                is extremly low. Also, you will learn that SHA-1 is not secure
                anymore, but it doesn't matter, because it is not used for
                security in Git.
              </p>
            </div>

            <div class="group">
              <h2 class="heading heading--h2">The primary role of Git</h2>
              <p class="text">
                At the lowest conceptual level, Git is just a simple
                <b>key:value</b> store.
              </p>
              <p class="text">
                It calculates the SHA-1 hash of the given input, which may be a
                text file, photo, pdf or anything else. Then it stores the input
                under the name of the calculated SHA-1 hash inside the
                <span class="code">.git/objects/</span> directory.
              </p>
              <p class="text">
                This explanation is very simplified, but it is enough for now,
                just to understand the core concept of Git.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Calculate SHA-1 in Git</h2>
              <p class="text">
                We can use one of the internal Git commands to calculate the
                SHA-1 hash of the given input with the
                <span class="code">git hash-object</span> command:
              </p>
              <p class="text text--label">You can try it by yourself:</p>
              <pre><code class="code-block language-bash">$ echo -n "can horses swim?" | git hash-object --stdin
8579f63f0c021f84ebb2242b44bf985b12aeb14a</code></pre>
              <p class="text text--label">
                Another example with the text file:
              </p>
              <pre><code class="code-block language-bash">$ echo -n "can horses swim?" > file.txt
$ git hash-object file.txt
8579f63f0c021f84ebb2242b44bf985b12aeb14a</code></pre>
              <p class="text">
                <b>Notice</b>: If you try to calculate SHA-1 from the same text
                using the hash calculation form from above and the
                <span class="code">git hash-object</span> command, you will
                notice that <b>the results are different</b>. Why is that?
              </p>
              <p class="text">
                To explain this behaviour, we need to introduce some new terms.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Types of objects in Git</h2>
              <p class="text">
                Everything in Git is expressed with "internal git objects".
              </p>
              <p class="text">
                Git has four types of objects:
                <span class="code">blob</span>, <span class="code">tree</span>,
                <span class="code">commit</span> and
                <span class="code">tag</span>.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Blob</h2>
              <p class="text">Blob is a <b>generic piece of content</b>.</p>
              <p class="text">
                If you are using Git in your projects, your files with code are
                stored as Blobs inside the Git repository.
              </p>
              <p class="text">
                Blob is just a file, which is stored in the
                <span class="code">.git/objects/</span> directory.
              </p>
              <p class="text text--label">Blob is structured as follows:</p>
              <pre><code class="code-block language-bash">header + content</code></pre>
              <p class="text text--label">
                The <b>header</b> consists of the object type, which in our case
                is a blob, a single whitespace, its content size in bytes and a
                NULL byte:
              </p>
              <pre><code class="code-block language-bash">&lt;object type&gt; &lt;size of content in bytes&gt;\0

# Example header
blob 12\0</code></pre>
              <p class="text">
                The <b>content</b> is our input data (stdin, contents of a file,
                etc.), which we want to store in the Git repository.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Creating a Blob</h2>
              <p class="text text--label">
                For instance, we want to create a Blob from the previous
                <span class="code">file.txt</span>:
              </p>
              <pre><code class="code-block language-bash">can horses swim?</code></pre>
              <p class="text text--label">
                The blob will look like this (header + content):
              </p>
              <pre><code class="code-block language-bash">blob 17\0can horses swim?</code></pre>
              <p class="text text--label">
                The <span class="code">git hash-object -w</span> command with a
                <span class="code">-w</span> flag creates and writes the blob to
                the <span class="code">.git/objects</span> directory.
              </p>
              <pre><code class="code-block language-bash">$ mkdir test-git-blobs
$ cd test-git-blobs
$ git init
$ echo -n "can horses swim?" > file.txt
$ git hash-object -w file.txt
4e91d48941493c77aa18db2cf7661c1fcb4b6ee8</code></pre>
              <p class="text">
                <b>Exercise:</b> Go ahead, and find that newly created blob
                inside the <span class="code">.git/objects</span> directory. Try
                to view the content of the blob.
              </p>
              <p class="text">
                You can play around with creating the blob using this form:
              </p>
              <div class="form">
                <div class="form__group">
                  <label for="blob-input" class="form__label"
                    >File contents:</label
                  >
                  <input
                    class="form__input"
                    id="blob-input"
                    type="text"
                    value="can horses swim?"
                  />
                </div>
                <div class="form__group">
                  <label for="blob-sha1" class="form__label">SHA-1:</label>
                  <input
                    class="form__input"
                    id="blob-sha1"
                    type="text"
                    disabled
                  />
                </div>
                <div class="form__group">
                  <label for="blob-content" class="form__label"
                    >Blob (header + content):</label
                  >
                  <textarea
                    class="form__input"
                    name=""
                    id="blob-content"
                    cols="30"
                    rows="5"
                    disabled
                  ></textarea>
                </div>
                <div class="form__group">
                  <label for="blob-compressed" class="form__label"
                    >Compressed Blob (header + content) in HEX:</label
                  >
                  <textarea
                    class="form__input"
                    name=""
                    id="blob-compressed"
                    cols="30"
                    rows="5"
                    disabled
                  ></textarea>
                </div>
              </div>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Compressing the Blob</h2>
              <p class="text">
                As you may notice in the form above, there is an extra field
                with <b>compression</b>.
              </p>
              <p class="text">
                Git is smart enough to <b>compress</b> the content of the blob
                before it is stored in the
                <span class="code">.git/objects/</span> directory.
              </p>
              <p class="text">
                Git uses the
                <a href="https://en.wikipedia.org/wiki/Deflate" target="_blank"
                  >Deflate</a
                >
                data compression algorithm.
              </p>
              <p class="text">
                When Git saves the blob, it calculates the SHA-1 of the
                <b>raw blow</b>
                (header + content), then <b>compresses the blob</b> to a raw
                bytes and finally saves them under the name of hash:
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">How blobs are stored</h2>
              <p class="text text--label">
                Git groups the blobs in the directories by the
                <b>first two characters</b> of the blob. Our blob starts with
                the <span class="code">4e</span> prefix, so it is stored in the
                <span class="code">.git/objects/4e</span> directory:
              </p>
              <pre><code class="code-block language-bash">$ ls -l .git/objects/

total 12K
drwxr-xr-x 2 gigachad gigachad 4.0K Sep  9 09:01 4e
drwxr-xr-x 2 gigachad gigachad 4.0K Sep  8 13:19 info
drwxr-xr-x 2 gigachad gigachad 4.0K Sep  8 13:19 pack

$ ls -l .git/objects/4e

total 4.0K
-r--r--r-- 1 gigachad gigachad 32 Sep  9 09:01 91d48941493c77aa18db2cf7661c1fcb4b6ee8</code></pre>
              <p class="text text--label">
                If you try to view the content of the file with the
                <span class="code">cat</span> command, you will get some random
                characters, se we will output hex bytes, the same way as in the
                form above with the <span class="code">hexdump</span> command:
              </p>
              <pre><code class="code-block language-bash">$ hexdump -v -e '1/1 "%02x"' 91d48941493c77aa18db2cf7661c1fcb4b6ee8

78014bcac94f52303463484ecc53c8c82f2a4e2d56282ecfccb5070061a2082c</code></pre>
              <p class="text">
                Of course nobody views the blobs in the Git repository like
                this, I want to demonstrate that the compression works. You can
                compare the results to the form above.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Viewing the Blob</h2>
              <p class="text text--label"></p>
              <p class="text">
                To decompress and view <b>any Git object</b>, in our case the
                <b>Blob</b>, you should use the
                <span class="code">git cat-file &lt;SHA-1&gt;</span> command:
              </p>
              <p class="text">
                <b>Notice:</b> The command requires the SHA-1 hash of the blob,
                not the file name from the filesystem. You can provide only a
                few first characters of SHA-1 hash, as long as it is unique.
              </p>
              <p class="text text--label">
                The
                <span class="code">git cat-file</span> with
                <span class="code">-p</span> flag prints the contents of the
                object, and the <span class="code">-t</span> flag prints the
                type of the object:
              </p>
              <pre><code class="code-block language-bash"># Full SHA-1 hash

$ git cat-file -p 4e91d48941493c77aa18db2cf7661c1fcb4b6ee8
can horses swim?
$ git cat-file -t 4e91d48941493c77aa18db2cf7661c1fcb4b6ee8
blob

# Short SHA-1 hash

$ git cat-file -p 4e91d489414
can horses swim?
$ git cat-file -t 4e91d4
blob</code></pre>
              <p class="text">
                Now you are familiar with the
                <span class="code">blob</span> object.
              </p>
              <p class="text">
                <b>Notice:</b> The <span class="code">blob</span> object
                introduced new problem - we have lost the <b>filename</b>,
                because the SHA-1 is only calculated from the content of the
                file, the filenames is ignored and the SHA-1 hash becomes the
                filename.
              </p>
              <p class="text">
                You will understand the solution to this problem when we start
                discussing <span class="code">tree</span> objects.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Note on git objects</h2>
              <p class="text">
                Each Git object is structured, compressed and stored (<span
                  class="code"
                  >.git/objects</span
                >) in the same way.
              </p>
              <p class="text text--label">
                The only difference is in the
                <b>object name</b> in the header, and in the <b>content</b>:
              </p>
              <pre><code class="code-block language-plain"># Object stucture
header + content

# Blob
blob &lt;content size in bytes&gt;\0&lt;content&gt;

# Tree
tree &lt;content size in bytes&gt;\0&lt;content&gt;

# Commit
commit &lt;content size in bytes&gt;\0&lt;content&gt;

# Tag
tag &lt;content size in bytes&gt;\0&lt;content&gt;</code></pre>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Commits</h2>
              <p class="text">
                <b>Commit</b> is a <b>snapshot</b> of your project at a given
                time.
              </p>
              <p class="text">
                <span class="code">commit</span> is a second object type in Git.
              </p>
              <p class="text">
                Commits are stored in the
                <span class="code">.git/objects</span> directory.
              </p>
              <p class="text">
                To explain the <span class="code">commit</span> object, we need
                to prepare some files and directories in our git repository.
              </p>
              <p class="text text-label">
                Create a new directory and follow the instructions. Don't worry
                if you don't know the commands, we will cover them later.
              </p>
              <pre><code class="code-block language-bash">$ mkdir git-commits
$ cd git-commits
$ git init
$ mkdir dir1 dir2
$ echo -n "new file 1" > dir1/file1.txt
$ echo -n "new file 2" > dir2/file2.txt
$ echo -n "new file 3" > file3.txt
$ git add .
$ git commit -m "Init commit"
$ echo -n "new file 4" > file4.txt
$ git add .
$ git commit -m "Second commit"
$ git log
$ q
</code></pre>
              <p class="text text--label">What happened:</p>
              <ul class="list">
                <li class="list__item">
                  the command <span class="code">git add .</span> marked the new
                  files as ready to commit
                </li>
                <li class="list__item">
                  the command
                  <span class="code">git commit -m "Init commit"</span> saved
                  them to the git repository with message "Init commit".
                </li>
                <li class="list__item">
                  the command
                  <span class="code">git log</span> displayed list of commits
                </li>
              </ul>
              <p class="text text--label">
                Take a look at the <span class="code">git log</span> output:
              </p>
              <pre><code class="code-block language-bash">$ git log

commit 6bef83cf8560f8fc4994279afae86635cf1c394c (HEAD -> master)
Author: Maciej Biel &lt;example@email.com&gt;
Date:   Sun Sep 10 10:01:13 2023 +0200

  Second commit

commit 5d8da6e51bc54151677ba373cea0e13c9129eb6a (HEAD -> master)
Author: Maciej Biel &lt;example@email.com&gt;
Date:   Sun Sep 10 09:04:50 2023 +0200

  Init commit</code></pre>
              <p class="text">
                Do you remember the
                <span class="code">git cat-file</span> command from the previous
                sections?
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Inspecting the commit</h2>
              <p class="text">
                With the <span class="code">git cat-file</span> command we can
                inspect any object in the Git repository.
              </p>
              <p class="text text--label">
                Copy the SHA-1 of the commits from the
                <span class="code">git log</span> command and inspect the type
                of these objects:
              </p>
              <pre><code class="code-block language-plain">$ git cat-file -t 6bef83cf85

commit

$ git cat-file -t 5d8da6e51b

commit</code></pre>
              <p class="text text--label">
                Let's print the content of the commits:
              </p>
              <pre><code class="code-block language-plain">$ git cat-file -p 6bef83cf85

tree 01d7ad59ab92e3efe29f4347fe0b996d7188f580
parent 5d8da6e51bc54151677ba373cea0e13c9129eb6a
author Maciej Biel &lt;example@email.com&gt; 1694332873 +0200
committer Maciej Biel &lt;example@email.com&gt; 1694332873 +0200

Second commit

$ git cat-file -p 5d8da6e51b

tree 384a95a8d3539872c6eab82dedf3ad0cc2cf11c2
author Maciej Biel &lt;example@email.com&gt; 1694329490 +0200
committer Maciej Biel &lt;example@email.com&gt; 1694329490 +0200

Init commit</code></pre>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Structure of the commit</h2>
              <p class="text">Commits are always structured in the same way:</p>
              <ul class="list">
                <li class="list__item">
                  bunch of headers like: <span class="code">tree</span>,
                  <span class="code">parent</span>,
                  <span class="code">author</span>, etc.
                </li>
                <li class="list__item">newline <span class="code">\n</span></li>
                <li class="list__item">commit message</li>
              </ul>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Parents of the commit</h2>
              <pre><code class="code-block language-plain">parent 5d8da6e51bc54151677ba373cea0e13c9129eb6a</code></pre>
              <p class="text">
                The commit may have zero or multiple
                <span class="code">parent</span> headers.
              </p>
              <p class="text">
                When the commit is <b>the first commit</b> in the Git
                repository, it doesn't have a
                <span class="code">parent</span> header (<span class="code"
                  >5d8da6e51b</span
                >
                from previous section). It is the only commit in the repository
                without a <span class="code">parent</span> header.
              </p>
              <p class="text">
                Each next commit <b>must reference</b> it's previous commit
                using a <span class="code">parent</span> header and SHA-1 of the
                previous commit.
              </p>
              <p class="text">
                When the commit has multiple parents, it means that it is a
                <b>merge commit</b>, and it was created from multiple previous
                commits. We will talk about merging strategies later.
              </p>
              <p class="text">
                Commits are chained together using the
                <span class="code">parent</span> header. That means, Git history
                is not a <b>tree</b>, but a <b>DAG</b> (Directed Acyclic Graph).
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">
                Author and commiter of the commit
              </h2>
              <pre><code class="code-block language-plain">author Maciej Biel &lt;example@email.com&gt; 1694329490 +0200
committer Maciej Biel &lt;example@email.com&gt; 1694329490 +0200</code></pre>
              <p class="text">
                The <b>author</b> is the person who wrote the code changes,
                while the <b>committer</b> is the one who added them to the
                repository.
              </p>
              <p class="text">
                For instance a <b>commiter</b> might be a GitHub when merging a
                pull request.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Tree</h2>
              <p class="text">
                The <span class="code">tree</span> is a thrid type of Git
                objects.
              </p>
              <p class="text">
                The <span class="code">tree</span> is very similar to a
                <b>UNIX directory</b>.
              </p>
              <p class="text">
                Combination of <span class="code">blobs</span> and
                <span class="code">trees</span> is used to reflect the project
                file structure within Git.
              </p>
              <p class="text">
                All the content from the <span class="code">commit</span> (files
                added to git during creation of commit) is stored using only
                <span class="code">blobs</span> or
                <span class="code">trees</span>.
              </p>
              <p class="text text--label">
                Let's inspect the <span class="code">tree</span> header from the
                <span class="code">5d8da6e51b</span> commit:
              </p>
              <pre><code class="code-block"># Inspecting the commit

$ git cat-file -p 5d8da6e51b

...
tree 384a95a8d3539872c6eab82dedf3ad0cc2cf11c2
...</code></pre>

              <pre><code class="code-block"># Inspecting the tree type

$ git cat-file -t 384a95a8d3

tree

# Inspecting the tree

$ git cat-file -p 384a95a8d3539

040000 tree cc0fea78ece05cc37dae4d302b4b3a0301595eb9    dir1
040000 tree ef56f0a20f52ca47f13c8c5a72d6b7a3a22a3534    dir2
100644 blob b037b2f50c795358d208ffb853999c7d14257773    file3.txt</code></pre>
              <p class="text">
                During creation of the <span class="code">commit</span>, Git
                creates a <span class="code">tree</span> object, which contains
                all the files and directories, starting from the root directory
                of the project, and writes them to the
                <span class="code">.git/objects</span> directory.
              </p>
              <p class="text">
                The <span class="code">tree</span> object solves the problem
                with <b>missing filename</b> during creation of the blob.
              </p>
              <p class="text text--label">
                We can lookup the <span class="code">tree</span> object
                corresponding to <span class="code">dir1</span> directory:
              </p>
              <pre><code class="code-block">$ git cat-file -p cc0fea78ece05c

100644 blob 4988b5e6c604b490401d0a1be9f6f8025b60781c    file1.txt</code></pre>
              <p class="text">
                Blobs are always <b>leafs</b> in the tree structure.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Structure of the tree row</h2>
              <pre><code class="code-block">040000 tree cc0fea78ece05cc37dae4d302b4b3a0301595eb9    dir1</code></pre>
              <p class="text text--label">
                Let's take a look at the first row. It consits of:
              </p>
              <ul class="list">
                <li class="list__item">
                  <span class="code">040000</span> - file mode
                </li>
                <li class="list__item">
                  <span class="code">tree</span> - object type (<span
                    class="code"
                    >tree</span
                  >
                  or <span class="code">blob</span>)
                </li>
                <li class="list__item">
                  <span class="code"
                    >cc0fea78ece05cc37dae4d302b4b3a0301595eb9</span
                  >
                  - SHA-1 of the saved object in the
                  <span class="code">.git/objects</span>
                </li>
                <li class="list__item">
                  <span class="code">dir1</span> - name of the file / directory
                </li>
              </ul>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Space efficiency in commits</h2>
              <p class="text">
                Take a look at the SHA-1 of the
                <span class="code">file3.txt</span> in the tree from first
                commit and from the second commit. <b>It didn't change</b>. The
                same goes for the <span class="code">dir1</span>,
                <span class="code">dir2</span> directories and blobs inside
                them.
              </p>
              <pre><code class="code-block"># Second commit

$ git cat-file -p 01d7ad59ab92e3efe2

040000 tree cc0fea78ece05cc37dae4d302b4b3a0301595eb9    dir1
040000 tree ef56f0a20f52ca47f13c8c5a72d6b7a3a22a3534    dir2
100644 blob b037b2f50c795358d208ffb853999c7d14257773    file3.txt
100644 blob 86825070f391e4be005bc2c73f91057cc7e94b28    file4.txt

# First commit tree

$ git cat-file -p 384a95a8d353987

040000 tree cc0fea78ece05cc37dae4d302b4b3a0301595eb9    dir1
040000 tree ef56f0a20f52ca47f13c8c5a72d6b7a3a22a3534    dir2
100644 blob b037b2f50c795358d208ffb853999c7d14257773    file3.txt</code></pre>
              <p class="text">
                <b>Git saves space</b> by referencing in the next commits
                objects, which SHA-1 didn't change.
              </p>
              <p class="text">
                For instance, if the content of
                <span class="code">file3.txt</span> will change, Git wil create
                a new blob with a new SHA-1, and will reference it in the next
                commit.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Commits uneveiled</h2>
              <p class="text">
                That's all about commits!
                <b>No more magic behind the scenes</b>. You can always at any
                time inspect any Git object in the repository. The only thing
                you need is an SHA-1 of the object and that's it!
              </p>
              <p class="text text--label">
                Let's summarize what we have learned to that point:
              </p>
              <ul class="list">
                <li class="list__item">
                  <span class="code">.git/objects</span> is a directory, which
                  acts as a <b>database</b> for Git objects.
                </li>
                <li class="list__item">
                  <span class="code">blobs</span>,
                  <span class="code">trees</span> and
                  <span class="code">commits</span> are <b>object types</b> in
                  Git, which are stored in the
                  <span class="code">.git/objects</span> directory.
                </li>
                <li class="list__item">
                  <span class="code">commit</span> is a <b>snapshot</b> of your
                  project, has a reference to the main
                  <span class="code">tree</span> object, which contains whole
                  <b>working directory structure</b>, and a reference to a
                  <b>parent commit</b>.
                </li>
                <li class="list__item">
                  <span class="code">tree</span> acts as a directory, contains
                  other <b>trees and blobs</b> with their names.
                </li>
                <li class="list__item">
                  <span class="code">blob</span> is a generic piece of content,
                  used to store <b>any file</b> from the working directory.
                </li>
              </ul>
              <img src="assets/git-object-model.png" alt="" class="image" />
              <div class="image-caption">
                Source:
                <a
                  href="http://shafiul.github.io/gitbook/1_the_git_object_model.html"
                  target="_blank"
                  >Git Community Book</a
                >
              </div>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Loose objects and compression</h2>
              <p class="text">
                Let's take a look at the
                <span class="code">.git/objects</span> directory and inspect the
                files after creating the commits in the previous section:
              </p>
              <pre><code class="code-block language-bash">ls -l .git/objects

total 48
drwxr-xr-x 2 gigachad gigachad 4096 Sep 10 10:01 01
drwxr-xr-x 2 gigachad gigachad 4096 Sep 10 09:04 38
drwxr-xr-x 2 gigachad gigachad 4096 Sep 10 09:04 49
drwxr-xr-x 2 gigachad gigachad 4096 Sep 10 09:04 5d
drwxr-xr-x 2 gigachad gigachad 4096 Sep 10 10:01 6b
drwxr-xr-x 2 gigachad gigachad 4096 Sep 10 10:01 86
drwxr-xr-x 2 gigachad gigachad 4096 Sep 10 09:04 8c
drwxr-xr-x 2 gigachad gigachad 4096 Sep 10 09:04 b0
drwxr-xr-x 2 gigachad gigachad 4096 Sep 10 09:04 cc
drwxr-xr-x 2 gigachad gigachad 4096 Sep 10 09:04 ef
drwxr-xr-x 2 gigachad gigachad 4096 Sep 10 09:04 info
drwxr-xr-x 2 gigachad gigachad 4096 Sep 10 09:04 pack</code></pre>
              <p class="text">
                All single files in the first ten directories, except the
                <span class="code">info</span> and
                <span class="code">pack</span> directories, are called
                <b>loose objects</b>.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Packfiles</h2>
              <p class="text">
                Every object with different SHA-1 in Git repository is stored as
                a <b>separate object</b>.
              </p>
              <p class="text">
                <b
                  >Dealing with lots of small files on disk is very
                  inefficient.</b
                >
                Sending these files over the network too (have you ever pushed
                <span class="code">node_modules/</span> to GitHub 😂)?
              </p>
              <p class="text">
                Let's assume, we have a very long file which takes up 100KB of
                space on the disk. We commit it and then make a change in only
                one character in the file, so in the next commit, the
                <b>SHA-1 will change</b>.
              </p>
              <p class="text">
                Even though <b>99.9% of the file is the same</b> as before, Git
                must create a copy of the 100KB file in the next commit. This
                sound very space inefficient.
              </p>
              <p class="text">
                Fortunately, Git has a solution for this problem. To save space,
                Git combines multiple objects into a single file called a
                <b>packfile</b>.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Packing objects</h2>
              <p class="text">
                Git has a built-in
                <a href="https://git-scm.com/docs/git-gc" target="_blank"
                  ><b>garbarge collector</b></a
                >, which runs from time to time (for instance on
                <span class="code">git push</span>) and packs
                <b>all the loose objects</b> into a <b>single packfiles</b>.
                This happens automatically, and we don't have to worry about it.
              </p>
              <p class="text">
                For learning purposes, we will pack the objects manually. To do
                that, we will use the <span class="code">git gc</span> command:
              </p>
              <pre><code class="code-block language-plain">$ ls -l .git/objects

total 48
drwxr-xr-x 2 gigachad gigachad 4096 Sep 10 10:01 01
drwxr-xr-x 2 gigachad gigachad 4096 Sep 10 09:04 38
drwxr-xr-x 2 gigachad gigachad 4096 Sep 10 09:04 49
drwxr-xr-x 2 gigachad gigachad 4096 Sep 10 09:04 5d
drwxr-xr-x 2 gigachad gigachad 4096 Sep 10 10:01 6b
drwxr-xr-x 2 gigachad gigachad 4096 Sep 10 10:01 86
drwxr-xr-x 2 gigachad gigachad 4096 Sep 10 09:04 8c
drwxr-xr-x 2 gigachad gigachad 4096 Sep 10 09:04 b0
drwxr-xr-x 2 gigachad gigachad 4096 Sep 10 09:04 cc
drwxr-xr-x 2 gigachad gigachad 4096 Sep 10 09:04 ef
drwxr-xr-x 2 gigachad gigachad 4096 Sep 10 09:04 info
drwxr-xr-x 2 gigachad gigachad 4096 Sep 10 09:04 pack

$ git gc

Enumerating objects: 10, done.
Counting objects: 100% (10/10), done.
Delta compression using up to 6 threads
Compressing objects: 100% (4/4), done.
Writing objects: 100% (10/10), done.
Total 10 (delta 1), reused 0 (delta 0)

$ ls -l .git/objects

total 8
drwxr-xr-x 2 gigachad gigachad 4096 Sep 10 16:58 info
drwxr-xr-x 2 gigachad gigachad 4096 Sep 10 16:58 pack

$ ls -l .git/objects/pack

total 8
-r--r--r-- 1 gigachad gigachad 1352 Sep 10 16:58 pack-8d7a7a9ff4d59f249dd1d0f5963ab59402e0e2ca.idx
-r--r--r-- 1 gigachad gigachad  630 Sep 10 16:58 pack-8d7a7a9ff4d59f249dd1d0f5963ab59402e0e2ca.pack</code></pre>
              <p class="text">
                As you can see, Git packed all loose objects into
                <b>single packfile</b> and <b>packfile index</b>.
              </p>
              <p class="text">
                Usually, there <b>won't be any loose objects</b> in the
                <span class="code">.git/objects</span> directory, because the
                objects are stored in the packfiles.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Packfile and Packfile Index</h2>
              <p class="text">
                Thanks to packfiles, Git stores <b>original objects</b> once and
                then stores only a differences between <b>new objects</b> and
                <b>original ones</b> (deltas). Everything is compressed and
                stored in well organized format.
              </p>
              <p class="text">
                Another benefit is <b>reducing amount of small files</b> on the
                disk, so it's easier to manage them and send them over the
                network.
              </p>
              <p class="text">
                <span class="code">pack-[sha1].pack</span> stores
                <b>packed objects</b> with <b>computed deltas</b>.
              </p>
              <p class="text">
                <span class="code">pack-[sha1].idx</span> provides an index into
                <span class="code">pack-[sha1].pack</span>. It stores
                <b>information about the objects</b> in the packfile, including
                their SHA-1 hashes and the offset within the packfile where each
                object's compressed data starts.
              </p>
              <p class="text">
                In the example with one character change in 100KB file, Git
                <b>won't duplicate the new blob</b>, but will store only that
                one character difference compared to the original file.
              </p>
              <p class="text">
                This approach saves space <b>very efficiently</b>.
                <a href="https://git-scm.com/docs/pack-format" target="_blank"
                  >You can read more about packfiles here.</a
                >
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">The three trees</h2>
              <p class="text text--label">
                This term in Git describes, that there are three primary stages
                that represent the status of files in your project:
              </p>
              <ul class="list">
                <li class="list__item">Working Directory</li>
                <li class="list__item">Staging Area / Index</li>
                <li class="list__item">Local Repository / HEAD</li>
              </ul>
              <img
                src="assets/three-trees.jpg"
                alt="graphic showing flow between working directory, index and local repository"
                class="image image--margin"
              />
              <p class="text text--label">
                We will cover each of these stages briefly.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Working directory</h2>
              <p class="text">
                It's just a root directory, where
                <b>files from your project are stored</b>, and where Git
                repository is initialized. Nothing special.
              </p>
              <p class="text">
                Working directory is like a <b>sandbox</b>, where you can freely
                make changes, before you decide to save them to the Git
                repository.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Staging Area / Index</h2>
              <p class="text">
                When you finish work on the files in the working directory, it
                would be nice to have a place, where you can
                <b>prepare the commit</b>, i.e. select files, which should be
                included in the commit, review them and when everthing is ready,
                save them to the repository.
              </p>
              <p class="text">
                That's exactly what the <b>staging area</b> (also called
                <b>index</b>) is for. It's a place between the working directory
                and the local repository, where you can prepare and review files
                for the commit. It's your <b>proposed next commit</b>.
              </p>
              <p class="text">
                The command <span class="code">git add</span> is used to add
                files to the staging area.
              </p>
              <p class="text">
                How does <b>the staging area work</b>? Technically speaking,
                it's not a separate place somewhere in the repository, but it is
                a <b>binary file</b> called
                <span class="code">.git/index</span>.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">How does the Index works?</h2>
              <p class="text">
                <span class="code">.git/index</span> is a binary file, which
                stores sorted paths of files in the repository, their hashes,
                versions and some other metadata.
              </p>
              <p class="text text--label">
                We can view only <b>partial content</b> of the
                <span class="code">.git/index</span> file with the
                <span class="code">git ls-files --stage</span> command:
              </p>
              <pre><code class="code-block language-plain">git ls-files --stage

100644 4988b5e6c604b490401d0a1be9f6f8025b60781c 0       dir1/file1.txt
100644 8c7f7ff45b68b6e818f2d4bc3ae6f43332d3ecf7 0       dir2/file2.txt
100644 b037b2f50c795358d208ffb853999c7d14257773 0       file3.txt
100644 86825070f391e4be005bc2c73f91057cc7e94b28 0       file4.txt</code></pre>
              <p class="text text--label">
                What does the <span class="code">.git/index</span> do:
              </p>
              <ol class="list">
                <li class="list__item">
                  It stores the current snapshot of all files
                  <b>added to the repository or to the index.</b>
                </li>
                <li class="list__item">
                  When creating a commit, the
                  <span class="code">tree</span> object, that will be included
                  in the commit, is created <b>based on the contents</b> of the
                  <span class="code">.git/index</span>.
                </li>
                <li class="list__item">
                  It allows for <b>quick comparison of changes</b> between the
                  working directory and what is in the index.
                </li>
                <li class="list__item">
                  It stores information <b>about conflicts</b> if they occur.
                </li>
              </ol>
              <p class="text text--label">
                <a
                  href="https://github.com/git/git/blob/867b1c1bf68363bcfd17667d6d4b9031fa6a1300/Documentation/technical/index-format.txt#L38"
                  target="_blank"
                  >Not every property is displayed with the git ls-files
                  command</a
                >. Under the hood, for each file,
                <span class="code">.git/index</span> stores following
                properties:
              </p>
              <ul class="list">
                <li class="list__item">
                  <span class="code">mtime</span> - <b>latest update time</b>.
                  This allows Git to quickly identify which files have changed
                  since the last time in the working tree without having to
                  search through everything each time there are changes.
                </li>
                <li class="list__item">
                  <span class="code">fname</span> - <b>filename</b>
                </li>
                <li class="list__item">
                  <span class="code">wdir</span> - file version (SHA-1) in the
                  working directory
                </li>
                <li class="list__item">
                  <span class="code">stage</span> - file version (SHA-1) in the
                  staging directory
                </li>
                <li class="list__item">
                  <span class="code">repo</span> - file version (SHA-1) in the
                  local repository
                </li>
              </ul>
              <p class="text">
                <span class="code">.git/index</span> is updated when
                <b>adding</b> or <b>removing</b> files from the staging area and
                the local repository.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Adding new files to the Index</h2>
              <p class="text text--label">Take a look at this scenario:</p>
              <pre><code class="code-block language-plain">$ echo -n "new file 5" > file5.txt

$ ll .git/objects

total 8.0K
drwxr-xr-x 2 gigachad gigachad 4.0K Sep 11 15:55 info
drwxr-xr-x 2 gigachad gigachad 4.0K Sep 11 15:55 pack

$ git ls-files --stage

100644 4988b5e6c604b490401d0a1be9f6f8025b60781c 0       dir1/file1.txt
100644 8c7f7ff45b68b6e818f2d4bc3ae6f43332d3ecf7 0       dir2/file2.txt
100644 b037b2f50c795358d208ffb853999c7d14257773 0       file3.txt
100644 86825070f391e4be005bc2c73f91057cc7e94b28 0       file4.txt

$ git status

On branch master
Untracked files:
  (use "git add &lt;file&gt;..." to include in what will be committed)
        file5.txt

nothing added to commit but untracked files present (use "git add" to track)

$ git add file5.txt

$ git status

On branch master
Changes to be committed:
  (use "git restore --staged &lt;file&gt;..." to unstage)
        new file:   file5.txt

$ ll .git/objects

total 12K
drwxr-xr-x 2 gigachad gigachad 4.0K Sep 11 15:42 14
drwxr-xr-x 2 gigachad gigachad 4.0K Sep 11 15:41 info
drwxr-xr-x 2 gigachad gigachad 4.0K Sep 11 15:41 pack

$ git ls-files --stage

100644 4988b5e6c604b490401d0a1be9f6f8025b60781c 0       dir1/file1.txt
100644 8c7f7ff45b68b6e818f2d4bc3ae6f43332d3ecf7 0       dir2/file2.txt
100644 b037b2f50c795358d208ffb853999c7d14257773 0       file3.txt
100644 86825070f391e4be005bc2c73f91057cc7e94b28 0       file4.txt
100644 1463a3913b7f3ed15583d64cf7fb528e1cb39634 0       file5.txt</code></pre>
              <p class="text text--label">Let's explain what happened:</p>
              <ul class="list">
                <li class="list__item">
                  We added a new file <span class="code">file5.txt</span>.
                </li>
                <li class="list__item">
                  No new objects in <span class="code">.git/objects/</span> were
                  created at this point.
                </li>
                <li class="list__item">
                  File is not included in the
                  <span class="code">.git/index</span>.
                </li>
                <li class="list__item">
                  The new file is untracked in
                  <span class="code">git status</span>.
                </li>
                <li class="list__item">
                  We staged the file using the
                  <span class="code">git add</span> command.
                </li>
                <li class="list__item">
                  The new file is now staged in the repository.
                </li>
                <li class="list__item">
                  A new object was created in the
                  <span class="code">.git/objects/</span> directory for
                  <span class="code">file5.txt</span>. This action was performed
                  by the <span class="code">.git/index</span>.
                </li>
                <li class="list__item">
                  A new entry was added to the
                  <span class="code">.git/index</span> for
                  <span class="code">file5.txt</span>.
                </li>
              </ul>
              <p class="text text--label">
                Now, lets modify the <span class="code">file5.txt</span> and add
                it again to the repository:
              </p>
              <pre><code class="code-block language-plain">$ echo -n "new file 6" > file5.txt

$ git status

On branch master
Changes to be committed:
  (use "git restore --staged &lt;file&gt;..." to unstage)
        new file:   file5.txt

Changes not staged for commit:
  (use "git add &lt;file&gt;..." to update what will be committed)
  (use "git restore &lt;file&gt;..." to discard changes in working directory)
        modified:   file5.txt

$ ll .git/objects

total 12K
drwxr-xr-x 2 gigachad gigachad 4.0K Sep 11 15:42 14
drwxr-xr-x 2 gigachad gigachad 4.0K Sep 11 15:41 info
drwxr-xr-x 2 gigachad gigachad 4.0K Sep 11 15:41 pack

$ git ls-files --stage

100644 4988b5e6c604b490401d0a1be9f6f8025b60781c 0       dir1/file1.txt
100644 8c7f7ff45b68b6e818f2d4bc3ae6f43332d3ecf7 0       dir2/file2.txt
100644 b037b2f50c795358d208ffb853999c7d14257773 0       file3.txt
100644 86825070f391e4be005bc2c73f91057cc7e94b28 0       file4.txt
100644 1463a3913b7f3ed15583d64cf7fb528e1cb39634 0       file5.txt

$ git add file5.txt

$ ll .git/objects

total 16K
drwxr-xr-x 2 gigachad gigachad 4.0K Sep 11 15:42 14
drwxr-xr-x 2 gigachad gigachad 4.0K Sep 11 15:45 d7
drwxr-xr-x 2 gigachad gigachad 4.0K Sep 11 15:41 info
drwxr-xr-x 2 gigachad gigachad 4.0K Sep 11 15:41 pack

$ git ls-files --stage

100644 4988b5e6c604b490401d0a1be9f6f8025b60781c 0       dir1/file1.txt
100644 8c7f7ff45b68b6e818f2d4bc3ae6f43332d3ecf7 0       dir2/file2.txt
100644 b037b2f50c795358d208ffb853999c7d14257773 0       file3.txt
100644 86825070f391e4be005bc2c73f91057cc7e94b28 0       file4.txt
100644 d7bd1b39072cb3ddc0e503f51aab7e7e0e39539b 0       file5.txt</code></pre>
              <p class="text text--label">What happened this time:</p>
              <ul class="list">
                <li class="list__item">
                  We modified the content of the
                  <span class="code">file5.txt</span>.
                </li>
                <li class="list__item">
                  In the <span class="code">git status</span>, previous version
                  of the <span class="code">file5.txt</span> is still staged (is
                  added to the <span class="code">.git/index</span>), new
                  version appears as modified.
                </li>
                <li class="list__item">
                  The <span class="code">.git/index</span> shows entry with
                  version of <span class="code">file5.txt</span> before
                  modification.
                </li>
                <li class="list__item">
                  We stage the file again using the
                  <span class="code">git add</span> command.
                </li>
                <li class="list__item">
                  The <span class="code">.git/index</span> is updated with the
                  new version of the <span class="code">file5.txt</span>.
                </li>
                <li class="list__item">
                  In the <span class="code">.git/objects/</span> we can see
                  previous version of the <span class="code">file5.txt</span>,
                  which became a <b>dangling object</b> (an object without any
                  reference in the repository - garbage collector will remove
                  this file by default
                  <a href="https://git-scm.com/docs/git-gc" target="_blank"
                    >after 90 days</a
                  >).
                </li>
              </ul>
              <p class="text">
                In the section above, I mentioned, that every entry in the
                <span class="code">.git/index</span> has a <b>version</b> of the
                file expressed using <span class="code">mtime</span>,
                <span class="code">wdir</span>,
                <span class="code">staged</span> or
                <span class="code">repo</span> properties.
              </p>
              <p class="text">
                When the <span class="code">.git/index</span> is modified, these
                three properties are accordingly updated, and
                <span class="code">git status</span>
                <b>output is determined based on the differences</b> (SHA-1) in
                these properties.
              </p>
              <p class="text">
                To be honest, it's very hard to me to
                <b>deeply and clearly explain</b>
                how the
                <span class="code">.git/index</span> works. It requires
                <b>practise rather than reading theory</b>. I recommend you to
                try out different scenarious by yourself if you are interested
                in it's internals.
              </p>
              <p class="text">
                Explanation from
                <a href="#staging-area-/-index">this section</a> is enough, if
                you understand the basic concept of the staging area, which is
                just a <b>propose of the new commit</b>.
              </p>
              <img src="assets/index-view.png" alt="" class="image" />
              <div class="image-caption">
                Source:
                <a
                  href="https://github.blog/2021-11-10-make-your-monorepo-feel-small-with-gits-sparse-index/"
                  target="_blank"
                  >GitHub Blog</a
                >
              </div>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Local repository</h2>
              <p class="text">
                When the files are staged and ready to be saved to the
                repository, using the
                <span class="code">git commit</span> command, they are persisted
                in the local repository.
              </p>
              <p class="text">
                The files in the local repository are
                <span class="code">commit</span> objects in the
                <span class="code">.git/objects/</span> directory.
              </p>
              <p class="text">
                The <span class="code">tree</span> in the
                <span class="code">commit</span> object is created based on the
                content of the <span class="code">.git/index</span>. After
                creating the commit, the properties in the
                <span class="code">.git/index</span> are accordingly updated.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Branches</h2>
              <p class="text">
                Branches are used as <b>independent lines of development</b>.
                But what is branch itself?
              </p>
              <p class="text">
                Branch is a <b>named reference to the commit</b>.
              </p>
              <p class="text">
                That's it. Sounds simple, but confusing at the same time. Let's
                take a closer look at the branches inside the
                <span class="code">.git/</span> directory.
              </p>
              <p class="text">
                Branches, or more precisely, <b>references to a commits</b> are
                stored inside the
                <span class="code">.git/refs/</span> directory.
              </p>
              <pre><code class="code-block">$ ll .git/refs

total 12K
drwxr-xr-x 3 gigachad gigachad 4.0K Sep  5 16:07 heads
drwxr-xr-x 3 gigachad gigachad 4.0K Aug 30 09:35 remotes
drwxr-xr-x 2 gigachad gigachad 4.0K Jul  5 20:57 tags

$ ll .git/refs/heads

total 4.0K
-rw-r--r-- 1 gigachad gigachad 41 Sep 11 16:50 master</code></pre>
              <p class="text text--label">
                Inside the <span class="code">.git/refs</span> directory there
                are three other directories:
              </p>
              <ul class="list">
                <li class="list__item">
                  <span class="code">heads</span> - stores local branches.
                </li>
                <li class="list__item">
                  <span class="code">remotes</span> - stores remote branches.
                </li>
                <li class="list__item">
                  <span class="code">tags</span> - stores lightweight tags, we
                  will talk about them later.
                </li>
              </ul>
              <p class="text text--label">
                Let's take a closer look at the local branches:
              </p>
              <pre><code class="code-block">$ ll .git/refs/heads

total 4.0K
-rw-r--r-- 1 gigachad gigachad 41 Sep 11 16:50 master

$ cat .git/refs/heads/master

bf44270dcf4abb61d7c5062123bb054a3770f8dd</code></pre>
              <p class="text">
                When the repository is initialized, the default branch is
                created, usually called <b>master</b> or <b>main</b>.
              </p>
              <p class="text">
                A branch is a <b>text file</b>, which name is the
                <b>name of the branch</b>, and the content is the
                <b>SHA-1 of the commit, which the branch points to</b>. It's
                that simple.
              </p>
              <p class="text">
                When a new commit is created, the branch we are currently on is
                updated with the <b>SHA-1 of the new commit</b>, so the branch
                moves forward with each new commit.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">HEAD</h2>
              <p class="text">
                How do Git know which branch we are currently on? It's stored in
                the <span class="code">.git/HEAD</span> file.
              </p>
              <pre><code class="code-block">$ cat .git/HEAD

ref: refs/heads/master</code></pre>
              <p class="text">
                The <span class="code">.git/HEAD</span> is a text file, which
                stores <b>path to a branch</b> from the
                <span class="code">.git/refs/heads</span> directory.
              </p>
              <p class="text">
                When we switch branches, the
                <span class="code">.git/HEAD</span> is updated with the
                <b>new path</b>
                to the branch.
              </p>
              <p class="text">
                We can use the <b>currently used branch name</b> with the
                <span class="code">HEAD</span> interchangeably. It will be
                resolved to the <b>SHA-1 of the commit</b>, which the branch
                points to.
              </p>
              <pre><code class="code-block language-plain">$ git cat-file -p HEAD

tree ca832d9a2eda0108a3364a250a07a9124ff33fd1
parent aa656d4a755d144e68571585e33bf9c67a0b247c
author Maciej Biel &lt;example@email.com&gt; 1694443839 +0200
committer Maciej Biel &lt;example@email.com&gt; 1694443839 +0200

Third commit

$ git cat-file -p master

tree ca832d9a2eda0108a3364a250a07a9124ff33fd1
parent aa656d4a755d144e68571585e33bf9c67a0b247c
author Maciej Biel &lt;example@email.com&gt; 1694443839 +0200
committer Maciej Biel &lt;example@email.com&gt; 1694443839 +0200

Third commit

$ git cat-file -p bf44270

tree ca832d9a2eda0108a3364a250a07a9124ff33fd1
parent aa656d4a755d144e68571585e33bf9c67a0b247c
author Maciej Biel &lt;example@email.com&gt; 1694443839 +0200
committer Maciej Biel &lt;example@email.com&gt; 1694443839 +0200

Third commit</code></pre>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Reachability of the commits</h2>
              <p class="text">
                Commits can be <b>reachable</b> or
                <b>unreachable / dangling</b>. Take a look at the diagram below:
              </p>
              <img
                src="assets/reachability.jpg"
                alt="flow showing reachability of the commits"
                class="image image--margin"
              />
              <p class="text">
                When a branch references a commit, all of its ancestor commits
                (parent commits) become reachable, starting from the first
                commits to which the branches
                <span class="code">master</span> and
                <span class="code">develop</span> points.
              </p>
              <p class="text">
                All of the grey commits are <b>unreachable</b>, because none of
                the branches points to them. They will remain in the
                <span class="code">.git/objects/</span> directory in the
                repository <b>for the 90 days</b>.
              </p>
              <p class="text">
                If you know the <b>SHA-1</b> of the unreachable commits (for
                instance from reflog) you can still checkout to them, create a
                branch on that commit, so they will be <b>reachable again</b>.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Detached HEAD</h2>
              <p class="text">
                This is a situation, when the
                <span class="code">.git/HEAD</span> file points
                <b>directly to the commit</b>, instead of the branch.
              </p>
              <p class="text">
                The <span class="code">89bv5fa</span> commit in a diagram above
                is an example of a commit, which was created in the detached
                HEAD mode. None of the branches points to this commit, so it's a
                <b>dangling commit</b>.
              </p>
              <pre><code class="code-block language-plain">test-repo git:(master) git checkout aa656d4

Note: switching to 'aa656d4'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by switching back to a branch.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -c with the switch command. Example:

  git switch -c &lt;new-branch-name&gt;

Or undo this operation with:

  git switch -

Turn off this advice by setting config variable advice.detachedHead to false

HEAD is now at aa656d4 Second commit
test-repo git:(aa656d4)</code></pre>
              <p class="text">
                Any new commits created in this state <b>will be lost</b> after
                switching back to a branch, beacuse they won't be referenced by
                any branch (reachability).
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Merging strategies</h2>
              <p class="text">
                Lorem ipsum dolor sit amet consectetur, adipisicing elit.
                Eveniet, aut iusto doloribus earum obcaecati facere cum
                perferendis ipsam nobis ipsa.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Fast forward merge</h2>
              <p class="text">
                Lorem ipsum dolor sit amet consectetur, adipisicing elit.
                Eveniet, aut iusto doloribus earum obcaecati facere cum
                perferendis ipsam nobis ipsa.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Three way merge</h2>
              <p class="text">
                Lorem ipsum dolor sit amet consectetur, adipisicing elit.
                Eveniet, aut iusto doloribus earum obcaecati facere cum
                perferendis ipsam nobis ipsa.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Rebase</h2>
              <p class="text">
                Lorem ipsum dolor sit amet consectetur, adipisicing elit.
                Eveniet, aut iusto doloribus earum obcaecati facere cum
                perferendis ipsam nobis ipsa.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Squash merge</h2>
              <p class="text">
                Lorem ipsum dolor sit amet consectetur, adipisicing elit.
                Eveniet, aut iusto doloribus earum obcaecati facere cum
                perferendis ipsam nobis ipsa.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Configuring Git</h2>
              <p class="text">
                Lorem ipsum dolor sit amet consectetur, adipisicing elit.
                Eveniet, aut iusto doloribus earum obcaecati facere cum
                perferendis ipsam nobis ipsa.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Reflog</h2>
              <p class="text">
                Lorem ipsum dolor sit amet consectetur, adipisicing elit.
                Eveniet, aut iusto doloribus earum obcaecati facere cum
                perferendis ipsam nobis ipsa.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Tags</h2>
              <p class="text">
                Lorem ipsum dolor sit amet consectetur, adipisicing elit.
                Eveniet, aut iusto doloribus earum obcaecati facere cum
                perferendis ipsam nobis ipsa.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Annotated Tags</h2>
              <p class="text">
                Lorem ipsum dolor sit amet consectetur, adipisicing elit.
                Eveniet, aut iusto doloribus earum obcaecati facere cum
                perferendis ipsam nobis ipsa.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">Lightweight Tags</h2>
              <p class="text">
                Lorem ipsum dolor sit amet consectetur, adipisicing elit.
                Eveniet, aut iusto doloribus earum obcaecati facere cum
                perferendis ipsam nobis ipsa.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">.keep</h2>
              <p class="text">
                Git by default <b>doesn't add empty directories</b> to the
                repository.
              </p>
              <p class="text">
                A convinient way to add empty directories to the repository is
                to put an empty file called
                <span class="code">.keep</span> inside the directory.
              </p>
            </div>
            <div class="group">
              <h2 class="heading heading--h2">
                How does Git commands works under the hood?
              </h2>
              <p class="text">
                That's all about basic Git concepts. I hope you enjoyed it.
              </p>
              <p class="text">
                The continuation of this guide will be about
                <b>how most of the Git commands works under the hood</b>. I
                strongly recommend you to read my article about it:
              </p>
              <p class="text">
                <a
                  href="https://dev-blog.maciejbiel.pl/git-commands-overview/"
                  target="_blank"
                  >https://dev-blog.maciejbiel.pl/git-commands-overview/</a
                >
              </p>
            </div>
          </main>
          <footer class="footer">
            <p>© 2023 <b>Maciej Biel</b></p>
          </footer>
        </div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>
